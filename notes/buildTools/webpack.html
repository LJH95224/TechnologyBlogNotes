<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack 5 基础 | Alfred个人主页</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/TechnologyBlogNotes/image/hero.png">
    <meta name="description" content="Alfred个人博客">
    
    <link rel="preload" href="/TechnologyBlogNotes/assets/css/0.styles.65e7e18e.css" as="style"><link rel="preload" href="/TechnologyBlogNotes/assets/js/app.da895a72.js" as="script"><link rel="preload" href="/TechnologyBlogNotes/assets/js/2.8722ed46.js" as="script"><link rel="preload" href="/TechnologyBlogNotes/assets/js/3.6f9ee2f3.js" as="script"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/10.6b8f2728.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/100.cd231b2f.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/101.4e81552a.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/102.6a41d967.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/103.d3de69c4.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/104.4303c0d4.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/105.eee1bd9a.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/106.b1f4b30e.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/107.f089f1f3.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/108.c25b0ca8.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/109.f2d28afe.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/11.ea47d0cd.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/110.da5b06b2.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/111.45512082.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/112.45673308.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/113.59a63e13.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/114.9aed9710.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/115.19fffd53.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/116.a7b8162f.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/117.69d5f67d.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/118.0a37a707.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/119.94497b5a.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/12.5f28e706.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/120.5de66afa.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/121.8d2bf5f1.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/122.ce0dfc59.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/123.b95cc843.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/124.94f2d47f.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/125.8b37b983.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/126.8ae7ad8c.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/127.eb0cae96.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/128.3002ebea.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/129.42579b6d.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/13.293b99a5.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/130.6d0f4bb3.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/131.eb3d5593.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/132.38386dee.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/133.b88df324.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/134.d2842b7f.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/135.58402f8c.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/136.24c9add9.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/137.d4702a48.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/138.0a4db2ea.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/139.90967c0b.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/14.c7fae783.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/140.2a6c9eb2.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/141.257d50a5.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/142.3259dc58.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/143.4148cac9.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/144.8e24892f.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/145.c19b502d.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/146.62afd409.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/147.9eefbbb7.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/148.3371ccef.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/149.973656ca.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/15.06aa4ef8.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/150.7a834fdb.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/151.ffec6b32.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/152.d8b90487.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/153.16603714.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/154.5a809883.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/155.2316d4b3.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/156.7d9219ef.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/157.9f102246.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/158.ff67accc.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/159.ab03ee2c.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/16.89ff127c.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/160.426dbf78.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/161.79c22fa6.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/162.e9307c30.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/163.d8b3a928.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/164.a0a4b220.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/165.1f57a573.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/166.3a033f52.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/167.9f5b2e05.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/168.3430dd11.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/169.0cf13923.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/17.25e792e0.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/170.7bf030b7.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/171.1bc252a7.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/172.9ecb4b76.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/173.a9af742a.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/174.b96949a4.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/175.a4e276a2.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/176.610f1741.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/177.c31603e2.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/178.03c013b7.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/179.6731e690.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/18.440b769f.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/180.2daefa9d.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/181.623fe960.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/182.0b8a4e25.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/183.d1fb052e.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/184.edd3799d.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/185.e6369b18.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/186.17fe6ba4.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/187.5cc4fe06.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/188.3a248fa5.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/189.be2dab3f.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/19.19e7cf41.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/190.e076a39b.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/191.881eff70.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/192.c066d847.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/193.aeab56a2.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/194.1f17367b.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/195.dfabd059.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/196.db6bd3ff.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/197.7660a229.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/198.cd06e099.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/199.45405899.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/20.823fe248.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/200.1aac9ea6.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/21.4228596b.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/22.cbd669c1.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/23.0158efdd.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/24.6b661d21.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/25.45695023.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/26.e4cebf7e.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/27.9428b249.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/28.9bde4334.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/29.3d5ece59.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/30.0b6a9737.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/31.65925e35.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/32.553e599a.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/33.a1a48ea6.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/34.0193e3d3.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/35.1ce98c87.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/36.f66ef874.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/37.b6702174.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/38.ac9815f5.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/39.33541f0c.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/4.5b43df83.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/40.545338a7.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/41.54cbf4f4.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/42.daed7cda.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/43.f0c7f8b3.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/44.e6058bc7.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/45.d570577d.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/46.4f6f6f3c.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/47.6e2d3a2a.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/48.affe9fdc.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/49.6eaf37e9.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/5.82240dfb.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/50.cd8172d4.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/51.e3a7dbfb.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/52.f0590390.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/53.4cb59cae.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/54.308f9ddb.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/55.d655e2c6.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/56.b643245d.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/57.5dd44fbc.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/58.b3d2c973.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/59.1ecc9226.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/6.3d593d6c.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/60.7984b0ff.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/61.b8814e8a.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/62.9857c4cd.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/63.be1fd3a9.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/64.6119bbb4.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/65.b669c0f1.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/66.531deff9.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/67.86f52702.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/68.705db141.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/69.efb880bb.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/7.c3a761d2.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/70.2e4603ea.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/71.72ffb702.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/72.cabb7abe.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/73.a9d6cb35.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/74.085b67b0.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/75.a147036a.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/76.d49e1995.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/77.9a3c9969.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/78.2f186f30.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/79.3d7fc060.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/8.d492fed8.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/80.11cab12a.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/81.4038fdbb.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/82.72aeb3cf.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/83.3b81c0ba.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/84.f99033c7.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/85.92d4e842.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/86.a766ccfc.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/87.b6b22ce7.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/88.236468a2.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/89.40bb4434.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/9.d9b63cfe.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/90.0a594771.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/91.42948983.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/92.b2d71f40.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/93.a441320d.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/94.46093bd5.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/95.53a765c3.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/96.9fcc31a4.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/97.54aa2658.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/98.4e4e1e81.js"><link rel="prefetch" href="/TechnologyBlogNotes/assets/js/99.1d857c7a.js">
    <link rel="stylesheet" href="/TechnologyBlogNotes/assets/css/0.styles.65e7e18e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/TechnologyBlogNotes/" class="home-link router-link-active"><!----> <span class="site-name">Alfred个人主页</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/TechnologyBlogNotes/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开源项目" class="dropdown-title"><span class="title">开源项目</span> <span class="arrow down"></span></button> <button type="button" aria-label="开源项目" class="mobile-dropdown-title"><span class="title">开源项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/TechnologyBlogNotes/notes/problem/" class="nav-link">
  常用问题
</a></li><li class="dropdown-item"><!----> <a href="/TechnologyBlogNotes/notes/commonMethods/" class="nav-link">
  公用方法
</a></li><li class="dropdown-item"><!----> <a href="/TechnologyBlogNotes/notes/vscodePage/" class="nav-link">
  vscode
</a></li><li class="dropdown-item"><!----> <a href="/TechnologyBlogNotes/notes/buildTools/.html" class="nav-link">
  大文件上传和断点续传
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术笔记" class="dropdown-title"><span class="title">技术笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="技术笔记" class="mobile-dropdown-title"><span class="title">技术笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/TechnologyBlogNotes/notes/linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/TechnologyBlogNotes/notes/cordova/" class="nav-link">
  cordova
</a></li><li class="dropdown-item"><!----> <a href="/TechnologyBlogNotes/notes/buildTools/" class="nav-link router-link-active">
  打包工具
</a></li><li class="dropdown-item"><!----> <a href="/TechnologyBlogNotes/notes/base/" class="nav-link">
  基础知识
</a></li><li class="dropdown-item"><!----> <a href="/TechnologyBlogNotes/notes/Markdown/" class="nav-link">
  Markdown
</a></li><li class="dropdown-item"><!----> <a href="/TechnologyBlogNotes/notes/vue/" class="nav-link">
  vue技术栈
</a></li><li class="dropdown-item"><!----> <a href="/TechnologyBlogNotes/notes/typeScript/" class="nav-link">
  typeScript
</a></li><li class="dropdown-item"><!----> <a href="/TechnologyBlogNotes/notes/ECMAScript/" class="nav-link">
  ECMAScript 6 入门
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试题" class="dropdown-title"><span class="title">面试题</span> <span class="arrow down"></span></button> <button type="button" aria-label="面试题" class="mobile-dropdown-title"><span class="title">面试题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/TechnologyBlogNotes/interview/javascript/" class="nav-link">
  JS 题
</a></li><li class="dropdown-item"><!----> <a href="/TechnologyBlogNotes/interview/vue/" class="nav-link">
  Vue 题
</a></li><li class="dropdown-item"><!----> <a href="/TechnologyBlogNotes/interview/programme/" class="nav-link">
  编程题
</a></li><li class="dropdown-item"><!----> <a href="/TechnologyBlogNotes/interview/base/" class="nav-link">
  基本面试题
</a></li></ul></div></div><div class="nav-item"><a href="/TechnologyBlogNotes/aboutMe/" class="nav-link">
  关于我
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具箱" class="mobile-dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线服务
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.aliyun.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阿里云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          在线博客
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://juejin.im/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.zhihu.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  知乎
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.jianshu.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  简书
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://blog.csdn.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  csdn
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://segmentfault.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  segmentfault
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/LJH95224" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/TechnologyBlogNotes/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开源项目" class="dropdown-title"><span class="title">开源项目</span> <span class="arrow down"></span></button> <button type="button" aria-label="开源项目" class="mobile-dropdown-title"><span class="title">开源项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/TechnologyBlogNotes/notes/problem/" class="nav-link">
  常用问题
</a></li><li class="dropdown-item"><!----> <a href="/TechnologyBlogNotes/notes/commonMethods/" class="nav-link">
  公用方法
</a></li><li class="dropdown-item"><!----> <a href="/TechnologyBlogNotes/notes/vscodePage/" class="nav-link">
  vscode
</a></li><li class="dropdown-item"><!----> <a href="/TechnologyBlogNotes/notes/buildTools/.html" class="nav-link">
  大文件上传和断点续传
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术笔记" class="dropdown-title"><span class="title">技术笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="技术笔记" class="mobile-dropdown-title"><span class="title">技术笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/TechnologyBlogNotes/notes/linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/TechnologyBlogNotes/notes/cordova/" class="nav-link">
  cordova
</a></li><li class="dropdown-item"><!----> <a href="/TechnologyBlogNotes/notes/buildTools/" class="nav-link router-link-active">
  打包工具
</a></li><li class="dropdown-item"><!----> <a href="/TechnologyBlogNotes/notes/base/" class="nav-link">
  基础知识
</a></li><li class="dropdown-item"><!----> <a href="/TechnologyBlogNotes/notes/Markdown/" class="nav-link">
  Markdown
</a></li><li class="dropdown-item"><!----> <a href="/TechnologyBlogNotes/notes/vue/" class="nav-link">
  vue技术栈
</a></li><li class="dropdown-item"><!----> <a href="/TechnologyBlogNotes/notes/typeScript/" class="nav-link">
  typeScript
</a></li><li class="dropdown-item"><!----> <a href="/TechnologyBlogNotes/notes/ECMAScript/" class="nav-link">
  ECMAScript 6 入门
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试题" class="dropdown-title"><span class="title">面试题</span> <span class="arrow down"></span></button> <button type="button" aria-label="面试题" class="mobile-dropdown-title"><span class="title">面试题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/TechnologyBlogNotes/interview/javascript/" class="nav-link">
  JS 题
</a></li><li class="dropdown-item"><!----> <a href="/TechnologyBlogNotes/interview/vue/" class="nav-link">
  Vue 题
</a></li><li class="dropdown-item"><!----> <a href="/TechnologyBlogNotes/interview/programme/" class="nav-link">
  编程题
</a></li><li class="dropdown-item"><!----> <a href="/TechnologyBlogNotes/interview/base/" class="nav-link">
  基本面试题
</a></li></ul></div></div><div class="nav-item"><a href="/TechnologyBlogNotes/aboutMe/" class="nav-link">
  关于我
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具箱" class="mobile-dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线服务
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.aliyun.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阿里云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          在线博客
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://juejin.im/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.zhihu.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  知乎
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.jianshu.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  简书
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://blog.csdn.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  csdn
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://segmentfault.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  segmentfault
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/LJH95224" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/TechnologyBlogNotes/notes/buildTools/webpack.html" aria-current="page" class="active sidebar-link">webpack 5 基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TechnologyBlogNotes/notes/buildTools/webpack.html#webpack-打包-css" class="sidebar-link">webpack 打包 CSS</a></li><li class="sidebar-sub-header"><a href="/TechnologyBlogNotes/notes/buildTools/webpack.html#打包-less" class="sidebar-link">打包 less</a></li><li class="sidebar-sub-header"><a href="/TechnologyBlogNotes/notes/buildTools/webpack.html#打包-css-打包成独立文件" class="sidebar-link">打包 CSS 打包成独立文件</a></li><li class="sidebar-sub-header"><a href="/TechnologyBlogNotes/notes/buildTools/webpack.html#添加样式前缀" class="sidebar-link">添加样式前缀</a></li><li class="sidebar-sub-header"><a href="/TechnologyBlogNotes/notes/buildTools/webpack.html#校验-css-代码-格式" class="sidebar-link">校验 CSS 代码 格式</a></li><li class="sidebar-sub-header"><a href="/TechnologyBlogNotes/notes/buildTools/webpack.html#压缩-css-插件-optimize-css-assets-webpack-plugin" class="sidebar-link">压缩 CSS 插件 optimize-css-assets-webpack-plugin</a></li><li class="sidebar-sub-header"><a href="/TechnologyBlogNotes/notes/buildTools/webpack.html#webpack-打包-html" class="sidebar-link">webpack 打包 HTML</a></li><li class="sidebar-sub-header"><a href="/TechnologyBlogNotes/notes/buildTools/webpack.html#打包-js-webpack编译js" class="sidebar-link">打包 JS （ webpack编译JS ）</a></li><li class="sidebar-sub-header"><a href="/TechnologyBlogNotes/notes/buildTools/webpack.html#打包-js-eslint-格式校验" class="sidebar-link">打包 JS （eslint 格式校验）</a></li><li class="sidebar-sub-header"><a href="/TechnologyBlogNotes/notes/buildTools/webpack.html#打包图片" class="sidebar-link">打包图片</a></li><li class="sidebar-sub-header"><a href="/TechnologyBlogNotes/notes/buildTools/webpack.html#打包字体" class="sidebar-link">打包字体</a></li><li class="sidebar-sub-header"><a href="/TechnologyBlogNotes/notes/buildTools/webpack.html#资源模块-asset-modules" class="sidebar-link">资源模块 （Asset Modules）</a></li><li class="sidebar-sub-header"><a href="/TechnologyBlogNotes/notes/buildTools/webpack.html#webpack-dev-server" class="sidebar-link">webpack dev server</a></li><li class="sidebar-sub-header"><a href="/TechnologyBlogNotes/notes/buildTools/webpack.html#webpack-区分环境打包" class="sidebar-link">webpack 区分环境打包</a></li><li class="sidebar-sub-header"><a href="/TechnologyBlogNotes/notes/buildTools/webpack.html#自定义-plugin" class="sidebar-link">自定义 plugin</a></li><li class="sidebar-sub-header"><a href="/TechnologyBlogNotes/notes/buildTools/webpack.html#自定义-loader" class="sidebar-link">自定义 loader</a></li><li class="sidebar-sub-header"><a href="/TechnologyBlogNotes/notes/buildTools/webpack.html#代码分离-code-splitting" class="sidebar-link">代码分离 （Code Splitting）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TechnologyBlogNotes/notes/buildTools/webpack.html#如何分离" class="sidebar-link">如何分离</a></li><li class="sidebar-sub-header"><a href="/TechnologyBlogNotes/notes/buildTools/webpack.html#多入口打包" class="sidebar-link">多入口打包</a></li><li class="sidebar-sub-header"><a href="/TechnologyBlogNotes/notes/buildTools/webpack.html#提取公共模块" class="sidebar-link">提取公共模块</a></li><li class="sidebar-sub-header"><a href="/TechnologyBlogNotes/notes/buildTools/webpack.html#动态导入" class="sidebar-link">动态导入</a></li></ul></li><li class="sidebar-sub-header"><a href="/TechnologyBlogNotes/notes/buildTools/webpack.html#源码映射-source-map" class="sidebar-link">源码映射（source Map）</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="webpack-5-基础"><a href="#webpack-5-基础" class="header-anchor">#</a> webpack 5 基础</h1> <h2 id="webpack-打包-css"><a href="#webpack-打包-css" class="header-anchor">#</a> webpack 打包 CSS</h2> <ul><li><p>非 JS 文件打包，需要对应的 loader</p> <ul><li>css-loader 将 CSS 转换为 JS （将 CSS 输出到打包后的 JS 文件中）</li> <li>style-loader 将包含 CSS 内容的 JS 代码，挂载到页面的 、&lt;style&gt;  标签中</li></ul></li> <li><p>引入 CSS</p> <blockquote><p>import ’./css/main.css‘</p></blockquote></li> <li><p>安装</p> <blockquote><p>npm install css-loader style-loader -D</p></blockquote></li> <li><p>配置</p> <ul><li><p>匹配后缀名： <em><strong>text: /\.css$/i</strong></em></p></li> <li><p>指定加载器： <em><strong>use: ['style-loader', 'css-loader']</strong></em></p> <blockquote><p>指定加载器的时候，后指定的加载器会优先执行。上面代码中，先指定了 <code>style-loader</code> 后指定了 <code>css-loader</code> 。实际执行的时候，先执行 <code>css-loader</code> 后执行 <code>style-loader</code></p></blockquote> <p><img src="/TechnologyBlogNotes/assets/img/1624259474844.30cb1226.png" alt="1624259474844"></p></li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// 在这里指定配置规则 执行顺序按照数组里面，从后往前的顺序执行</span>
      <span class="token punctuation">{</span>
        text<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token comment">// 执行顺序2: 将 js 中的样式，挂载到 &lt;style&gt; 标签中</span>
          <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
          <span class="token comment">// 执行顺序1： css-loader 按照 CommonJS 规范，将样式文件，输出到 JS 中</span>
          <span class="token string">'css-loader'</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</code></pre></div><h2 id="打包-less"><a href="#打包-less" class="header-anchor">#</a> 打包 less</h2> <p><strong>less-loader 将 less 样式转换为 css 样式</strong></p> <ul><li><p>引入 Less</p> <blockquote><p>import './css/main.less'  // 引入 less 样式文件</p></blockquote></li> <li><p>安装</p> <blockquote><p>npm install less less-loader -D // 配置的时候需要用到 style-loader 和 css-loader 如果未安装，请安装</p></blockquote></li> <li><p>配置</p> <ul><li><p>匹配后缀名：</p> <blockquote><p>text: /\.less$/i</p></blockquote></li> <li><p>指定加载器：</p> <blockquote><p>use: ['style-loader', 'css-loader', 'less-loader']</p></blockquote></li></ul></li></ul> <p><img src="/TechnologyBlogNotes/assets/img/1624261835609.d28e8719.png" alt="1624261835609"></p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// 在这里指定配置规则 执行顺序按照数组里面，从后往前的顺序执行</span>
      <span class="token punctuation">{</span>
        text<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token comment">// 执行顺序3: 将 js 中的样式，挂载到 &lt;style&gt; 标签中</span>
          <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
          <span class="token comment">// 执行顺序3： css-loader 按照 CommonJS 规范，将样式文件，输出到 JS 中</span>
          <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
          <span class="token comment">// 执行顺序1：将 less 转换为普通的 css</span>
          <span class="token string">'less-loader'</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</code></pre></div><h2 id="打包-css-打包成独立文件"><a href="#打包-css-打包成独立文件" class="header-anchor">#</a> 打包 CSS 打包成独立文件</h2> <ul><li><p>安装插件</p> <blockquote><p>npm install mini-css-extract-plugin -D</p></blockquote></li> <li><p>引入插件 （ webpack.config.js ）</p> <blockquote><p>const MiniCssExtractPlugin = require('mini-css-extract-plugin')</p></blockquote></li> <li><p>替换 style-loader ( use: ['MiniCssExtractPlugin.loader', 'css-loader'] )</p> <ul><li>style-loader ：将 css 打包到  &lt;style&gt; 标签中</li> <li>MiniCssExtractPlugin.loader: 将 CSS 打包到 独立文件中</li></ul></li> <li><p>配置插件 new MiniCssExtractPlugin({})</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> resolve <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mini-css-extract-plugin'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">,</span> <span class="token comment">// &quot;production&quot; | &quot;development&quot; | &quot;none&quot;</span>

  entry<span class="token operator">:</span> <span class="token string">'./index.js'</span><span class="token punctuation">,</span>

  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 所有输出文件的目标路径 必须是绝对路径</span>
    path<span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

    filename<span class="token operator">:</span> <span class="token string">'bundle.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// 在这里指定配置规则 执行顺序按照数组里面，从后往前的顺序执行</span>
      <span class="token punctuation">{</span>
        text<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token comment">// 执行顺序2: 将 css 打包成独立的文件</span>
          <span class="token string">'MiniCssExtractPlugin.loader'</span><span class="token punctuation">,</span>
          <span class="token comment">// 执行顺序1： css-loader 按照 CommonJS 规范，将样式文件，输出到 JS 中</span>
          <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        text<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token comment">// 执行顺序3: 将 js 中的样式，挂载到 &lt;style&gt; 标签中</span>
          <span class="token string">'MiniCssExtractPlugin.loader'</span><span class="token punctuation">,</span>
          <span class="token comment">// 执行顺序2： css-loader 按照 CommonJS 规范，将样式文件，输出到 JS 中</span>
          <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
          <span class="token comment">// 执行顺序1：将 less 转换为普通的 css</span>
          <span class="token string">'less-loader'</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">'css/[name].css'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="添加样式前缀"><a href="#添加样式前缀" class="header-anchor">#</a> 添加样式前缀</h2> <ul><li><p>安装</p> <blockquote><p>npm install postcss-loader autoprefixer -D</p></blockquote></li> <li><p>配置 webpack.config.js</p> <ul><li>postcss-loader 应该放在 css-loader 后面</li></ul> <blockquote><p>use: ['MiniCssExtractPlugin.loader', 'css-loader', '<strong>postcss-loader</strong>']</p></blockquote></li> <li><p>新建 postcss.config.js</p> <ul><li>plugins: [ require('autoprefixer') ]</li></ul></li> <li><p>配置需要兼容的浏览器</p> <ul><li><p>package.json 中指定 browserslist</p></li> <li><p>详情参考：https://www.npmjs.com/package/browserslist</p></li> <li><p>具体操作</p> <ol><li>可以在 package.json 中指定 （推荐）</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;browserslist&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;last 1 version&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 匹配浏览器最后的一个版本（最新的一个版本）</span>
    <span class="token string">&quot;&gt; 1%&quot;</span> <span class="token comment">// 代表全球超过 1% 使用的浏览器（市场占有率超过 1% 的浏览器）</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>在项目根目录下创建 <code>.browserslistrc</code></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// .browserslistrc</span>

# Browsers that we support

last <span class="token number">1</span> version
<span class="token operator">&gt;</span> <span class="token number">1</span><span class="token operator">%</span>
</code></pre></div></li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.config.js 文件</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> resolve <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mini-css-extract-plugin'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">,</span> <span class="token comment">// &quot;production&quot; | &quot;development&quot; | &quot;none&quot;</span>

  entry<span class="token operator">:</span> <span class="token string">'./index.js'</span><span class="token punctuation">,</span>

  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 所有输出文件的目标路径 必须是绝对路径</span>
    path<span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

    filename<span class="token operator">:</span> <span class="token string">'bundle.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// 在这里指定配置规则 执行顺序按照数组里面，从后往前的顺序执行</span>
      <span class="token punctuation">{</span>
        text<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token comment">// 执行顺序2: 将 css 打包成独立的文件</span>
          <span class="token string">'MiniCssExtractPlugin.loader'</span><span class="token punctuation">,</span>
          <span class="token comment">// 执行顺序1： css-loader 按照 CommonJS 规范，将样式文件，输出到 JS 中</span>
          <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
          <span class="token comment">// 执行顺序0：通过 postcss-loader 给样式属性添加浏览器前缀</span>
          <span class="token string">'postcss-loader'</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        text<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token comment">// 执行顺序4: 将 js 中的样式，挂载到 &lt;style&gt; 标签中</span>
          <span class="token string">'MiniCssExtractPlugin.loader'</span><span class="token punctuation">,</span>
          <span class="token comment">// 执行顺序3： css-loader 按照 CommonJS 规范，将样式文件，输出到 JS 中</span>
          <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
          <span class="token comment">// 执行顺序2：通过 postcss-loader 给样式属性添加浏览器前缀，在less中，需要先转换成 css 代码，再给样式属性添加前缀</span>
          <span class="token string">'postcss-loader'</span><span class="token punctuation">,</span>
          <span class="token comment">// 执行顺序1：将 less 转换为普通的 css</span>
          <span class="token string">'less-loader'</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">'css/[name].css'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string">'plugins'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'autoprefixer'</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="校验-css-代码-格式"><a href="#校验-css-代码-格式" class="header-anchor">#</a> 校验 CSS 代码 格式</h2> <ul><li><p>安装</p> <blockquote><p>npm install stylelint stylelint-config-standard stylelint-webpack-plugin -D</p></blockquote></li> <li><p>引入</p> <blockquote><p>const StylelintPlugin = require('stylelint-webpack-plugin')</p></blockquote></li> <li><p>配置</p> <ul><li>new StylelintPlugin({})</li></ul></li> <li><p>指定校验规则 （在 package.json 中指定 stylelint）</p> <blockquote><p>&quot;stylelint&quot;: { &quot;extends&quot;: &quot;stylelint-config-standard&quot;, rules: [] }</p></blockquote></li></ul> <p><strong>安装的 三个包分别有什么作用</strong></p> <ul><li><p>stylelint</p> <ul><li><p>https://stylelint.io/</p></li> <li><p>定义了很多代码校验规则</p> <blockquote><p>例如：number-leading-zero</p> <ul><li>line-height: .5 (错误)</li> <li>lint-height：0.5 （正确）</li></ul> <p>因为校验规则，所以缺少0 会报错</p></blockquote></li> <li></li></ul></li> <li><p>stylelint-config-standard （提供了一个具体的规则集）</p> <ul><li>https://github.com/stylelint/stylelint-config-standard</li> <li>指定规则配置有三种方式， 按照加载的先后顺序，依次是：
<ul><li>在 package.json 中的 stylelint 属性指定规则</li> <li>在 <code>.stylelintrc</code> 中指定规则</li> <li>在<code>stylelint.config.js</code> 中指定规则</li></ul></li></ul></li> <li><p>stylelint-webpack-plugin ()</p> <ul><li>https://webpack.docschina.org/plugins/stylelint-webpack-plugin</li></ul> <h2 id="压缩-css-插件-optimize-css-assets-webpack-plugin"><a href="#压缩-css-插件-optimize-css-assets-webpack-plugin" class="header-anchor">#</a> 压缩 CSS 插件 optimize-css-assets-webpack-plugin</h2></li> <li><p>安装</p> <blockquote><p>npm install optimize-css-assets-webpack-plugin -D</p></blockquote></li> <li><p>引入</p> <blockquote><p>const OptimizeCssAssetsPlugin = require('optimize-css-assets-webpack-plugin')</p></blockquote></li> <li><p>配置插件</p> <blockquote><p>new OptimizeCssAssetsPlugin()</p></blockquote></li></ul> <h2 id="webpack-打包-html"><a href="#webpack-打包-html" class="header-anchor">#</a> webpack 打包 HTML</h2> <ul><li><p><strong>html-webpack-plugin</strong></p> <ul><li>生成 HTML 文件（用于服务器访问），并在 HTML 中加载所有的打包资源</li> <li>指定 HTML 模板、设置 HTML 变量、压缩 HTML</li></ul></li> <li><p>安装</p> <blockquote><p>npm install html-webpack-plugin -D</p></blockquote></li> <li><p>配置</p> <ul><li>https://www.npmjs.com/package/html-webpack-plugin</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>

<span class="token comment">// 插件配置</span>
<span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// 指定打包后的文件名称</span>
    filename<span class="token operator">:</span> <span class="token string">'about.html'</span><span class="token punctuation">,</span>
    <span class="token comment">// 用来指定生成 html 的模板</span>
    template<span class="token operator">:</span> <span class="token string">'./src/index.html'</span><span class="token punctuation">,</span>
    <span class="token comment">// 指定 HTML 中的变量</span>
    title<span class="token operator">:</span> <span class="token string">'关于我们'</span><span class="token punctuation">,</span>
    <span class="token comment">// 压缩html</span>
    minify<span class="token operator">:</span> <span class="token punctuation">{</span>
        collapseWhitespace<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        keepClosingSlash<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        removeComments<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        removeRedundantAttributes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        removeScriptTypeAttributes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        removeStyleLinkTypeAttributes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        useShortDoctype<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="打包-js-webpack编译js"><a href="#打包-js-webpack编译js" class="header-anchor">#</a> 打包 JS （ webpack编译JS ）</h2> <ul><li><p><strong>目的</strong></p> <ul><li>将 ES6+ 转成 ES5， 从而保证，JS在低版本浏览器的兼容性</li></ul></li> <li><p>安装</p> <blockquote><p>npm install babel-loader @babel/core @babel/preset-env -D</p></blockquote></li> <li><p>配置</p> <ul><li>https://www.npmjs.com/package/babel-loader</li> <li></li></ul></li></ul> <p><img src="/TechnologyBlogNotes/assets/img/1624325737295.ebd26504.png" alt="1624325737295"></p> <p><img src="/TechnologyBlogNotes/assets/img/1624325762320.6677dcf4.png" alt="1624325762320"></p> <p><img src="/TechnologyBlogNotes/assets/img/1624325774414.3fb0919c.png" alt="1624325774414"></p> <ul><li><p>@babel/preset-env 只能编译基本语法 （promise 等高级语法就不能转换）</p></li> <li><p>@babel/polyfill （转译所有 JS 新语法）</p> <blockquote><p>安装： npm install @babel/polyfill -D</p> <p>只需要在入口文件引入即可（不是webpack.config.js文件）</p> <p>import '@babel/polyfill'</p></blockquote></li> <li><p>因为 polyfill 转换太大，有些不需要转换，所以使用 core-js （按需转译 JS 新语法）</p> <ul><li>安装 npm install core-js -D</li> <li>配置：
<ul><li>按需加载 useBuiltIns：&quot;usage&quot;</li> <li>指定版本 corejs: 3</li></ul></li></ul></li></ul> <p><strong>@babel/polyfill优点</strong></p> <ul><li>一次性解决所有兼容性问题,而且是全局的,浏览器的<code>console</code>也可以使用</li></ul> <p><strong>@babel/polyfill缺点</strong></p> <ul><li>一次性引入了ES6+的所有polyfill, 打包后的js文件体积会偏大</li> <li>对于现代的浏览器,有些不需要polyfill,造成流量浪费</li> <li>污染了全局对象</li> <li>不适合框架或库的开发</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.m?js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  exclude<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  use<span class="token operator">:</span> <span class="token punctuation">{</span>
    loader<span class="token operator">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
    options<span class="token operator">:</span> <span class="token punctuation">{</span>
      presets<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">[</span>
          <span class="token string">'@babel/preset-env'</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token comment">// 按需加载</span>
            useBuiltIns<span class="token operator">:</span> <span class="token string">'usage'</span><span class="token punctuation">,</span>
            <span class="token comment">// 指定 corejs 版本</span>
            corejs<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
            <span class="token comment">// targets: &quot;defaults&quot;</span>
            <span class="token comment">// target 可以指定浏览器版本</span>
            targets<span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token comment">// 谷歌浏览器 58 以上的版本</span>
              chrome<span class="token operator">:</span> <span class="token string">'58'</span><span class="token punctuation">,</span>
              <span class="token comment">// IE 9 以上的版本</span>
              ie<span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span>
              firefox<span class="token operator">:</span> <span class="token string">'60'</span><span class="token punctuation">,</span>
              safari<span class="token operator">:</span> <span class="token string">'10'</span><span class="token punctuation">,</span>
              edge<span class="token operator">:</span> <span class="token string">'17'</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="打包-js-eslint-格式校验"><a href="#打包-js-eslint-格式校验" class="header-anchor">#</a> 打包 JS （eslint 格式校验）</h2> <ul><li><p><strong>安装</strong></p> <ul><li>npm install eslint eslint-config-airbnb-base eslint-webpack-plugin eslint-plugin-import -D</li> <li>eslint （校验 JS 代码格式的工具）
<ul><li>https://eslint.org/</li></ul></li> <li>esint-config-airbnb-base (最流行的 JS 代码格式规范)</li> <li>eslint-webpack-plugin (Webpack 的 eslint 插件 )
<ul><li>https://www.npmjs/com/package/eslint-webpack-plugin</li></ul></li> <li>eslint-plugin-import
<ul><li>用于在 package.json 中读取 eslintConfig 配置项</li></ul></li></ul></li> <li><p>配置</p> <ul><li><p>eslint-webpack-plugin</p> <ul><li>const ESLintPlugin = require(&quot;eslint-webpack-plugin&quot;)</li> <li>plugins: [new ESLintPlugin() ]</li></ul></li> <li><p>eslintConfig （在package.json 中配置）</p> <blockquote><p>&quot;eslintConfig&quot;: { &quot;extends&quot;: &quot;airbnb-base&quot; }</p></blockquote></li></ul></li></ul> <h2 id="打包图片"><a href="#打包图片" class="header-anchor">#</a> 打包图片</h2> <ul><li><p>file-loader</p> <ul><li>将用到的图片复制到输出目录，过滤掉不用的图片</li> <li>npm install file-loader -D</li> <li>https://www.npmjs.com/package/file-loader</li></ul></li> <li><p>url-loader</p> <ul><li>是 file-loader 的升级版，如果图片小于配置大小，会转成 base64 字符串</li> <li>转成 base64 字符串后，图片会跟着 js 一起加载 （减少图片请求次数）</li> <li>npm install url-loader -D</li> <li>https://www.npmjs.com/package/url-loader</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// file-loader 配置</span>
<span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpe?g|gif)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
  use<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// 转换之后，使用import 引入的图片会显示出来，但是css 引入的图片会因为路径问题找不到图片，需要在设置css的loader上面配置路径</span>
      loader<span class="token operator">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">// 注意要修改 css 的loader配置 添加路径</span>
<span class="token punctuation">{</span>
  text<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
  use<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// 执行顺序2: 将 css 打包成独立的文件</span>
    <span class="token comment">// 'MiniCssExtractPlugin.loader',</span>
    <span class="token punctuation">{</span>
      loader<span class="token operator">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
      options<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 为背景图片指定路径</span>
        publicPath<span class="token operator">:</span> <span class="token string">'../'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 执行顺序1： css-loader 按照 CommonJS 规范，将样式文件，输出到 JS 中</span>
    <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
    <span class="token comment">// 执行顺序0：通过 postcss-loader 给样式属性添加浏览器前缀</span>
    <span class="token string">'postcss-loader'</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
  text<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
  use<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// 执行顺序4: 将 js 中的样式，挂载到 &lt;style&gt; 标签中</span>
    <span class="token comment">// 'MiniCssExtractPlugin.loader',</span>
    <span class="token punctuation">{</span>
      loader<span class="token operator">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
      options<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 为背景图片指定路径</span>
        publicPath<span class="token operator">:</span> <span class="token string">'../'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 执行顺序3： css-loader 按照 CommonJS 规范，将样式文件，输出到 JS 中</span>
    <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
    <span class="token comment">// 执行顺序2：通过 postcss-loader 给样式属性添加浏览器前缀，在less中，需要先转换成 css 代码，再给样式属性添加前缀</span>
    <span class="token string">'postcss-loader'</span><span class="token punctuation">,</span>
    <span class="token comment">// 执行顺序1：将 less 转换为普通的 css</span>
    <span class="token string">'less-loader'</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// url-loader 配置 </span>
<span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpe?g|gif)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
  use<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      loader<span class="token operator">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
      options<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 指定图片的大小，小于该数值的图片，会被转成 base64 的字符串 limit 数值的单位是字节，</span>
        limit<span class="token operator">:</span> <span class="token number">8</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span> <span class="token comment">// 8kb</span>
        <span class="token comment">// [name] 是原来图片的名称。</span>
        <span class="token comment">// [ext] 是原来图片的格式</span>
        name<span class="token operator">:</span> <span class="token string">'image/[name].[ext]'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><p>html-loader</p> <ul><li>将 HTML 导出为字符串 （负责引入img，从而能被 url-loader 进行处理）</li> <li>https://www.npmjs.com/package/html-loader</li></ul></li> <li><p>html-loader 与 html-webpack-plugin 的冲突</p> <ul><li>原因： html-webpack-plugin 会检查目标文件是否已经有 loader处理，如果有其他 loader 处理，html-webpack-plugin 不再使用 lodash.template 去处理 ejs 语法</li> <li>解决：将 html-webpack-plugin 中，模板文件的后缀名改为 <code>.ejs</code> （非 .html）修改完配置文件之后，还需要修改模板文件的文件名</li></ul></li> <li><p>修改完文件名和webpack 插件之后，在模板文件index.ejs img标签中添加src的图片还是不能显示出来,需要使用模板字符串的写法引入。修改完模板文件之后，如果没有 html文件。则不需要加载 html-loader</p></li></ul> <blockquote><p><code>&lt;img src=&quot;&lt;%= reqiure('./image/icon.png') %&gt;&quot; /&gt;</code></p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>module: {
  rules: [
    {
      test: /\.(png|jpe?g|gif)$/i,
      use: [
        {
          loader: 'file-loader',
          options: {
            // 指定图片的大小，小于该数值的图片，会被转成 base64 的字符串 limit 数值的单位是字节，
            limit: 8 * 1024, // 8kb
            // [name] 是原来图片的名称。
            // [ext] 是原来图片的格式
            name: 'image/[name].[ext]',
            // url-loader 默认采用 ES Modules 规范进行解析，但是 html-loader 引用图片使用的是 commonjs 规范
            // 解决：关闭 url-loader 默认的 ES Modules 规范，强制 url-loader 使用 CommonJS 规范进行打包
            esModule: false,

          }
        }
      ]
    },
    {
      test: /\.(htm|html)$/i,
      use: {
        loader: 'html-loader',
        options: {
          // webpack 4 中，只需要在 url-loader 配置 esModule: false
          // wbeoack 5 中，还需要在 html-loader 配置 esModule: false
          esModule: false
        }
      }
    }
  ]
}
plugins: [
	new HtmlWebpackPlugin({
      // 指定打包后的文件名称
      filename: 'index.html',
      // 用来指定生成 html 的模板
      template: './src/index.ejs',
      // 指定 HTML 中的变量
      title: 'Webpack Demo'
    }),
    new HtmlWebpackPlugin({
      // 指定打包后的文件名称
      filename: 'about.html',
      // 用来指定生成 html 的模板
      template: './src/index.ejs',
      // 指定 HTML 中的变量
      title: '关于我们',
      // 压缩html
      minify: {
        collapseWhitespace: true,
        keepClosingSlash: true,
        removeComments: true,
        removeRedundantAttributes: true,
        removeScriptTypeAttributes: true,
        removeStyleLinkTypeAttributes: true,
        useShortDoctype: true
      }
    }),
]
</code></pre></div><h2 id="打包字体"><a href="#打包字体" class="header-anchor">#</a> 打包字体</h2> <ul><li>字体文件
<ul><li>https://www.iconfont.cn</li></ul></li> <li>file-loader
<ul><li>test: /.(eot|svg|ttf|woff|woff2)$/i,</li></ul></li> <li>copy-webpack-plugin
<ul><li>不需要处理的其他文件，可以直接复制到输出目录</li> <li>https://www.npmjs.com/package/copy-webpack-plugin</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(eot|svg|ttf|woff|woff2)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">{</span>
          loader<span class="token operator">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
          options<span class="token operator">:</span> <span class="token punctuation">{</span>
            name<span class="token operator">:</span> <span class="token string">'fonts/[name].[ext]'</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
</code></pre></div><ul><li>clean-webpack-plugin （每次打包之前，先删除历史文件）
<ul><li>https://www.npmjs.com/package/clean-webpack-plugin</li></ul></li></ul> <h2 id="资源模块-asset-modules"><a href="#资源模块-asset-modules" class="header-anchor">#</a> 资源模块 （Asset Modules）</h2> <ul><li><p>功能：</p> <ul><li>资源模块是一种模块类型，它允许使用<strong>资源文件</strong>，而不需配置额外 loader</li> <li><strong>资源文件：</strong> 字体、图片、图标、HTML...</li> <li>不用 file-loader、url-loader 也能加载图片和字体</li></ul></li> <li><p>详情</p> <ul><li>https://webpack.docschina.org/guides/asset-modules/</li></ul></li> <li><p>Webpack 4</p> <ul><li>raw-loader （将文件导入为字符串）</li> <li>file-loader （将文件发送到输出目录）</li> <li>url-loader （将文件发送到输出目录，或转为 Data URI 内联到 bundle 中）</li></ul></li> <li><p>Webpack 5</p></li> <li><p>asset/resource 发送一个单独的文件并导出 URL （之前通过使用file-loader实现）</p> <ul><li>asset/inline      导出一个资源的 data URI （之前通过使用 url-loader 实现）</li> <li>asset/source     导出资源的源代码 （之前通过使用 raw-loader 实现）</li> <li>asset                  在导出一个data URL 和发送一个单独的文件之间自动选择（url-loader）</li></ul></li></ul> <p><strong>使用资源模块打包字体和图片</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpe?g|gif)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
  <span class="token comment">// 使用资源模块处理图片</span>
  <span class="token comment">// asset 可以在 asset/resource 和 asset/inline 之间进行选择</span>
  <span class="token comment">// 如果文件小于 8kb，则使用 asset/inline 类型</span>
  <span class="token comment">// 如果文件大于 8kb，则使用 asset/resource 类型</span>
  type<span class="token operator">:</span> <span class="token string">'asset'</span><span class="token punctuation">,</span>
  parser<span class="token operator">:</span> <span class="token punctuation">{</span>
    dataUrlCondition<span class="token operator">:</span> <span class="token punctuation">{</span>
      maxSize<span class="token operator">:</span> <span class="token number">8</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token comment">// 默认使用的也是 8kb， 也可以在此处设置</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 设置打包之后的路径和名称</span>
  generator<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">&quot;image/[name][ext]&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(eot|svg|ttf|woff|woff2)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
  <span class="token comment">// use: {</span>
  <span class="token comment">//   loader: 'file-loader',</span>
  <span class="token comment">//   options: {</span>
  <span class="token comment">//     name: 'fonts/[name].[ext]'</span>
  <span class="token comment">//   }</span>
  <span class="token comment">// }</span>

  <span class="token comment">// 使用资源模块处理字体文件</span>
  <span class="token comment">// asset 可以在 asset/resource 和 asset/inline 之间进行选择</span>
  <span class="token comment">// 如果文件小于 8kb，则使用 asset/inline 类型</span>
  <span class="token comment">// 如果文件大于 8kb，则使用 asset/resource 类型</span>
  type<span class="token operator">:</span> <span class="token string">'asset'</span><span class="token punctuation">,</span>
  parser<span class="token operator">:</span> <span class="token punctuation">{</span>
    dataUrlCondition<span class="token operator">:</span> <span class="token punctuation">{</span>
      maxSize<span class="token operator">:</span> <span class="token number">8</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token comment">// 默认使用的也是 8kb， 也可以在此处设置</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 设置打包之后的路径和名称</span>
  generator<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">&quot;fonts/[name][ext]&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="webpack-dev-server"><a href="#webpack-dev-server" class="header-anchor">#</a> webpack dev server</h2> <ul><li>作用： 发布web服务，提高开发效率</li> <li>详情：
<ul><li>https://www.npmjs.com/package/webpack-dev-server</li> <li>https://webpack.docschina.org/configuration/dev-server/</li></ul></li> <li>使用
<ul><li>webpack 4 ： webpack-dev-server ...</li> <li>webpack 5 ： webpack serve ...</li></ul></li> <li>热更新
<ul><li>webpack 4：
<ul><li>设置方式： hot: true</li></ul></li> <li>webpack 5:
<ul><li>liveReload: true (禁用 hot)</li> <li>target: &quot;web&quot; （热更新只适用于 web 相关的 targets ）</li></ul></li></ul></li> <li>proxy (配置接口代理)
<ul><li>解决 webpack-dev-server 下，访问接口的跨域问题</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 指定加载内容的路径</span>
    contentBase<span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'output'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 启用 gzip 压缩</span>
    compress<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 端口号</span>
    port<span class="token operator">:</span> <span class="token number">9200</span><span class="token punctuation">,</span>
    <span class="token comment">// 启用自动更新 （禁用hot）</span>
    liveReload<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 配置代理，解决接口跨域问题</span>
    proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// https://localhost:9200/api</span>
      <span class="token string">'/api'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// https://localhost:9200/api/users =&gt; https://api.github.com/api/users</span>
        target<span class="token operator">:</span> <span class="token string">'https://api.github.com'</span><span class="token punctuation">,</span>
        <span class="token comment">// https://localhost:9200/api/users =&gt; https://api.github.com/users</span>
        pathRewrite<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string">'^/api'</span><span class="token operator">:</span> <span class="token string">''</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 不能使用 localhost:9200 作为 github 的主机名</span>
        changeOrigin<span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 配置目标</span>
  target<span class="token operator">:</span> <span class="token string">&quot;web&quot;</span><span class="token punctuation">,</span>
</code></pre></div><h2 id="webpack-区分环境打包"><a href="#webpack-区分环境打包" class="header-anchor">#</a> webpack 区分环境打包</h2> <ul><li><p>通过变量环境区分</p> <ul><li>webpack --env.production</li> <li>webpack.config.js 中判断 env</li> <li>命令行中设置环境变量
<ul><li>webpack 4： webpack --env.production  // 注意： <code>--env</code> 和 <code>production</code> 中间用 <code>.</code>(点链接)</li> <li>webpack 5:   webpack --env production // 注意： <code>--env</code> 和 <code>production</code> 中间是空格</li></ul></li> <li>webpack.config.js
<ul><li>读取环境变量 env.production</li> <li>根据环境变量指定不同的配置</li></ul></li> <li>详情：
<ul><li>https://www.webpackjs.com/guides/environment-variables/</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">env<span class="token punctuation">,</span> argv</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 开发环境配置</span>
  <span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
    mode<span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
    <span class="token comment">// 更多配置...</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>env<span class="token punctuation">.</span>production<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 生产环境的配置</span>
      config<span class="token punctuation">.</span>mode<span class="token operator">:</span> <span class="token string">'production'</span>
      <span class="token comment">// 更多配置...</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> config
<span class="token punctuation">}</span>

</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.config.js 根据环境不同区分</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> resolve<span class="token punctuation">,</span> isAbsolute <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mini-css-extract-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> StylelintPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'stylelint-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> OptimizeCssAssetsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'optimize-css-assets-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> ESLintPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;eslint-webpack-plugin&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> CopyWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'copy-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> CleanWebpackPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span>


module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">env</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
    mode<span class="token operator">:</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">,</span> <span class="token comment">// &quot;production&quot; | &quot;development&quot; | &quot;none&quot;</span>

    entry<span class="token operator">:</span> <span class="token string">'./index.js'</span><span class="token punctuation">,</span>

    output<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 所有输出文件的目标路径 必须是绝对路径</span>
      path<span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

      filename<span class="token operator">:</span> <span class="token string">'bundle.js'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    module<span class="token operator">:</span> <span class="token punctuation">{</span>
      rules<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// 在这里指定配置规则 执行顺序按照数组里面，从后往前的顺序执行</span>
  
        <span class="token comment">// 将样式挂载到 &lt;style&gt; 标签中</span>
        <span class="token comment">// {</span>
        <span class="token comment">//   text: /\.css$/i,</span>
        <span class="token comment">//   use: [</span>
        <span class="token comment">//     // 执行顺序2: 将 js 中的样式，挂载到 &lt;style&gt; 标签中</span>
        <span class="token comment">//     'style-loader',</span>
        <span class="token comment">//     // 执行顺序1： css-loader 按照 CommonJS 规范，将样式文件，输出到 JS 中</span>
        <span class="token comment">//     'css-loader'</span>
        <span class="token comment">//   ]</span>
        <span class="token comment">// },</span>
        <span class="token comment">// {</span>
        <span class="token comment">//   text: /\.less$/i,</span>
        <span class="token comment">//   use: [</span>
        <span class="token comment">//     // 执行顺序3: 将 js 中的样式，挂载到 &lt;style&gt; 标签中</span>
        <span class="token comment">//     'style-loader',</span>
        <span class="token comment">//     // 执行顺序3： css-loader 按照 CommonJS 规范，将样式文件，输出到 JS 中</span>
        <span class="token comment">//     'css-loader',</span>
        <span class="token comment">//     // 执行顺序1：将 less 转换为普通的 css</span>
        <span class="token comment">//     'less-loader'</span>
        <span class="token comment">//   ]</span>
        <span class="token comment">// }</span>
        <span class="token comment">// 将 css 打包成独立的文件</span>
        <span class="token punctuation">{</span>
          text<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
          use<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token comment">// 执行顺序2: 将 css 打包成独立的文件</span>
            <span class="token comment">// 'MiniCssExtractPlugin.loader',</span>
            <span class="token punctuation">{</span>
              loader<span class="token operator">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
              options<span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token comment">// 为背景图片指定路径</span>
                publicPath<span class="token operator">:</span> <span class="token string">'../'</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token comment">// 执行顺序1： css-loader 按照 CommonJS 规范，将样式文件，输出到 JS 中</span>
            <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
            <span class="token comment">// 执行顺序0：通过 postcss-loader 给样式属性添加浏览器前缀</span>
            <span class="token string">'postcss-loader'</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          text<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
          use<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token comment">// 执行顺序4: 将 js 中的样式，挂载到 &lt;style&gt; 标签中</span>
            <span class="token comment">// 'MiniCssExtractPlugin.loader',</span>
            <span class="token punctuation">{</span>
              loader<span class="token operator">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
              options<span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token comment">// 为背景图片指定路径</span>
                publicPath<span class="token operator">:</span> <span class="token string">'../'</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token comment">// 执行顺序3： css-loader 按照 CommonJS 规范，将样式文件，输出到 JS 中</span>
            <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
            <span class="token comment">// 执行顺序2：通过 postcss-loader 给样式属性添加浏览器前缀，在less中，需要先转换成 css 代码，再给样式属性添加前缀</span>
            <span class="token string">'postcss-loader'</span><span class="token punctuation">,</span>
            <span class="token comment">// 执行顺序1：将 less 转换为普通的 css</span>
            <span class="token string">'less-loader'</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.m?js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          exclude<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          use<span class="token operator">:</span> <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              presets<span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">[</span>
                  <span class="token string">'@babel/preset-env'</span><span class="token punctuation">,</span>
                  <span class="token punctuation">{</span>
                    <span class="token comment">// 按需加载</span>
                    useBuiltIns<span class="token operator">:</span> <span class="token string">'usage'</span><span class="token punctuation">,</span>
                    <span class="token comment">// 指定 corejs 版本</span>
                    corejs<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                    <span class="token comment">// targets: &quot;defaults&quot;</span>
                    <span class="token comment">// target 可以指定浏览器版本</span>
                    targets<span class="token operator">:</span> <span class="token punctuation">{</span>
                      <span class="token comment">// 谷歌浏览器 58 以上的版本</span>
                      chrome<span class="token operator">:</span> <span class="token string">'58'</span><span class="token punctuation">,</span>
                      <span class="token comment">// IE 9 以上的版本</span>
                      ie<span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span>
                      firefox<span class="token operator">:</span> <span class="token string">'60'</span><span class="token punctuation">,</span>
                      safari<span class="token operator">:</span> <span class="token string">'10'</span><span class="token punctuation">,</span>
                      edge<span class="token operator">:</span> <span class="token string">'17'</span>
                    <span class="token punctuation">}</span>
                  <span class="token punctuation">}</span>
                <span class="token punctuation">]</span>
              <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// {</span>
        <span class="token comment">//   test: /\.(png|jpe?g|gif)$/i,</span>
        <span class="token comment">//   use: [</span>
        <span class="token comment">//     {</span>
        <span class="token comment">//       // 转换之后，使用import 引入的图片会显示出来，但是css 引入的图片会因为路径问题找不到图片，需要在设置css的loader上面配置路径</span>
        <span class="token comment">//       loader: 'file-loader',</span>
        <span class="token comment">//     }</span>
        <span class="token comment">//   ]</span>
        <span class="token comment">// }</span>
        <span class="token punctuation">{</span>
          test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpe?g|gif)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
          <span class="token comment">// use: {</span>
          <span class="token comment">//   loader: 'file-loader',</span>
          <span class="token comment">//   options: {</span>
          <span class="token comment">//     // 指定图片的大小，小于该数值的图片，会被转成 base64 的字符串 limit 数值的单位是字节，</span>
          <span class="token comment">//     limit: 8 * 1024, // 8kb</span>
          <span class="token comment">//     // [name] 是原来图片的名称。</span>
          <span class="token comment">//     // [ext] 是原来图片的格式</span>
          <span class="token comment">//     name: 'image/[name].[ext]',</span>
          <span class="token comment">//     // url-loader 默认采用 ES Modules 规范进行解析，但是 html-loader 引用图片使用的是 commonjs 规范</span>
          <span class="token comment">//     // 解决：关闭 url-loader 默认的 ES Modules 规范，强制 url-loader 使用 CommonJS 规范进行打包</span>
          <span class="token comment">//     esModule: false,</span>
  
          <span class="token comment">//   }</span>
          <span class="token comment">// }</span>
  
  
          <span class="token comment">// 使用资源模块处理图片</span>
          <span class="token comment">// asset 可以在 asset/resource 和 asset/inline 之间进行选择</span>
          <span class="token comment">// 如果文件小于 8kb，则使用 asset/inline 类型</span>
          <span class="token comment">// 如果文件大于 8kb，则使用 asset/resource 类型</span>
          type<span class="token operator">:</span> <span class="token string">'asset'</span><span class="token punctuation">,</span>
          parser<span class="token operator">:</span> <span class="token punctuation">{</span>
            dataUrlCondition<span class="token operator">:</span> <span class="token punctuation">{</span>
              maxSize<span class="token operator">:</span> <span class="token number">8</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token comment">// 默认使用的也是 8kb， 也可以在此处设置</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token comment">// 设置打包之后的路径和名称</span>
          generator<span class="token operator">:</span> <span class="token punctuation">{</span>
            filename<span class="token operator">:</span> <span class="token string">&quot;image/[name][ext]&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(htm|html)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
          use<span class="token operator">:</span> <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">'html-loader'</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token comment">// webpack 4 中，只需要在 url-loader 配置 esModule: false</span>
              <span class="token comment">// wbeoack 5 中，还需要在 html-loader 配置 esModule: false</span>
              esModule<span class="token operator">:</span> <span class="token boolean">false</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(eot|svg|ttf|woff|woff2)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
          <span class="token comment">// use: {</span>
          <span class="token comment">//   loader: 'file-loader',</span>
          <span class="token comment">//   options: {</span>
          <span class="token comment">//     name: 'fonts/[name].[ext]'</span>
          <span class="token comment">//   }</span>
          <span class="token comment">// }</span>
  
          <span class="token comment">// 使用资源模块处理字体文件</span>
          <span class="token comment">// asset 可以在 asset/resource 和 asset/inline 之间进行选择</span>
          <span class="token comment">// 如果文件小于 8kb，则使用 asset/inline 类型</span>
          <span class="token comment">// 如果文件大于 8kb，则使用 asset/resource 类型</span>
          type<span class="token operator">:</span> <span class="token string">'asset'</span><span class="token punctuation">,</span>
          parser<span class="token operator">:</span> <span class="token punctuation">{</span>
            dataUrlCondition<span class="token operator">:</span> <span class="token punctuation">{</span>
              maxSize<span class="token operator">:</span> <span class="token number">8</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token comment">// 默认使用的也是 8kb， 也可以在此处设置</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token comment">// 设置打包之后的路径和名称</span>
          generator<span class="token operator">:</span> <span class="token punctuation">{</span>
            filename<span class="token operator">:</span> <span class="token string">&quot;fonts/[name][ext]&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 指定加载内容的路径</span>
      contentBase<span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'output'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token comment">// 启用 gzip 压缩</span>
      compress<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token comment">// 端口号</span>
      port<span class="token operator">:</span> <span class="token number">9200</span><span class="token punctuation">,</span>
      <span class="token comment">// 启用自动更新 （禁用hot）</span>
      liveReload<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token comment">// 配置代理，解决接口跨域问题</span>
      proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// https://localhost:9200/api</span>
        <span class="token string">'/api'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token comment">// https://localhost:9200/api/users =&gt; https://api.github.com/api/users</span>
          target<span class="token operator">:</span> <span class="token string">'https://api.github.com'</span><span class="token punctuation">,</span>
          <span class="token comment">// https://localhost:9200/api/users =&gt; https://api.github.com/users</span>
          pathRewrite<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string">'^/api'</span><span class="token operator">:</span> <span class="token string">''</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token comment">// 不能使用 localhost:9200 作为 github 的主机名</span>
          changeOrigin<span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 配置目标</span>
    target<span class="token operator">:</span> <span class="token string">&quot;web&quot;</span><span class="token punctuation">,</span>
    plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        filename<span class="token operator">:</span> <span class="token string">'css/[name].css'</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token keyword">new</span> <span class="token class-name">StylelintPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">// 指定需要进行格式校验的文件</span>
        files<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'src/css/*.{css, less, sass, scss}'</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">// 指定打包后的文件名称</span>
        filename<span class="token operator">:</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span>
        <span class="token comment">// 用来指定生成 html 的模板</span>
        template<span class="token operator">:</span> <span class="token string">'./src/index.ejs'</span><span class="token punctuation">,</span>
        <span class="token comment">// 指定 HTML 中的变量</span>
        title<span class="token operator">:</span> <span class="token string">'Webpack Demo'</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">// 指定打包后的文件名称</span>
        filename<span class="token operator">:</span> <span class="token string">'about.html'</span><span class="token punctuation">,</span>
        <span class="token comment">// 用来指定生成 html 的模板</span>
        template<span class="token operator">:</span> <span class="token string">'./src/index.ejs'</span><span class="token punctuation">,</span>
        <span class="token comment">// 指定 HTML 中的变量</span>
        title<span class="token operator">:</span> <span class="token string">'关于我们'</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token keyword">new</span> <span class="token class-name">ESLintPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">// 自动解决常规的代码格式报错</span>
        fix<span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token comment">// 直接将 src 下，不需要特殊处理的文件，直接复制到输出目录中</span>
      <span class="token keyword">new</span> <span class="token class-name">CopyWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">'src/public'</span><span class="token punctuation">,</span>
            to<span class="token operator">:</span> <span class="token string">'public'</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 判断当前是否是生产环境打包</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>env<span class="token punctuation">.</span>production<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    config<span class="token punctuation">.</span>mode <span class="token operator">=</span> <span class="token string">'production'</span>
    config<span class="token punctuation">.</span>plugins <span class="token operator">=</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        filename<span class="token operator">:</span> <span class="token string">'css/[name].css'</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token keyword">new</span> <span class="token class-name">StylelintPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">// 指定需要进行格式校验的文件</span>
        files<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'src/css/*.{css, less, sass, scss}'</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token comment">// 压缩 css</span>
      <span class="token keyword">new</span> <span class="token class-name">OptimizeCSSPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">// 指定打包后的文件名称</span>
        filename<span class="token operator">:</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span>
        <span class="token comment">// 用来指定生成 html 的模板</span>
        template<span class="token operator">:</span> <span class="token string">'./src/index.ejs'</span><span class="token punctuation">,</span>
        <span class="token comment">// 指定 HTML 中的变量</span>
        title<span class="token operator">:</span> <span class="token string">'Webpack Demo'</span><span class="token punctuation">,</span>
        <span class="token comment">// 压缩html</span>
        minify<span class="token operator">:</span> <span class="token punctuation">{</span>
          collapseWhitespace<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          keepClosingSlash<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          removeComments<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          removeRedundantAttributes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          removeScriptTypeAttributes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          removeStyleLinkTypeAttributes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          useShortDoctype<span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">// 指定打包后的文件名称</span>
        filename<span class="token operator">:</span> <span class="token string">'about.html'</span><span class="token punctuation">,</span>
        <span class="token comment">// 用来指定生成 html 的模板</span>
        template<span class="token operator">:</span> <span class="token string">'./src/index.ejs'</span><span class="token punctuation">,</span>
        <span class="token comment">// 指定 HTML 中的变量</span>
        title<span class="token operator">:</span> <span class="token string">'关于我们'</span><span class="token punctuation">,</span>
        <span class="token comment">// 压缩html</span>
        minify<span class="token operator">:</span> <span class="token punctuation">{</span>
          collapseWhitespace<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          keepClosingSlash<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          removeComments<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          removeRedundantAttributes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          removeScriptTypeAttributes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          removeStyleLinkTypeAttributes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          useShortDoctype<span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token keyword">new</span> <span class="token class-name">ESLintPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">// 自动解决常规的代码格式报错</span>
        fix<span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token comment">// 直接将 src 下，不需要特殊处理的文件，直接复制到输出目录中</span>
      <span class="token keyword">new</span> <span class="token class-name">CopyWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">'src/public'</span><span class="token punctuation">,</span>
            to<span class="token operator">:</span> <span class="token string">'public'</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> config
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>通过配置文件区分</p> <ul><li>webpack.<code>dev</code>.conf.js （对应的 mode: development ）</li> <li>webpack.<code>prod</code>.conf.js (对应的 mode: production )</li> <li>webpack.base.conf.js (公共配置)</li></ul></li> <li><p>webpack-merge</p> <ul><li>将多个配置合并在一起</li> <li>https://www.npmjs.com/package/webpack-merge</li></ul></li></ul> <p><img src="/TechnologyBlogNotes/assets/img/1624345360950.85e48b40.png" alt="1624345360950"></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.base.conf.js</span>
<span class="token comment">// 公共配置模块</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> resolve <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mini-css-extract-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> StylelintPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'stylelint-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> ESLintPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;eslint-webpack-plugin&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> CopyWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'copy-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> CleanWebpackPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span>

<span class="token comment">// 通用的样式loader</span>
<span class="token keyword">const</span> commonStyleLoader <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// 执行顺序2: 将 css 打包成独立的文件</span>
  <span class="token punctuation">{</span>
    loader<span class="token operator">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
    options<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 为背景图片指定路径</span>
      publicPath<span class="token operator">:</span> <span class="token string">'../'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 执行顺序1： css-loader 按照 CommonJS 规范，将样式文件，输出到 JS 中</span>
  <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
  <span class="token comment">// 执行顺序0：通过 postcss-loader 给样式属性添加浏览器前缀</span>
  <span class="token string">'postcss-loader'</span>
<span class="token punctuation">]</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">,</span> <span class="token comment">// &quot;production&quot; | &quot;development&quot; | &quot;none&quot;</span>

  entry<span class="token operator">:</span> <span class="token string">'./index.js'</span><span class="token punctuation">,</span>

  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 所有输出文件的目标路径 必须是绝对路径</span>
    path<span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

    filename<span class="token operator">:</span> <span class="token string">'bundle.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// 在这里指定配置规则 执行顺序按照数组里面，从后往前的顺序执行</span>
      <span class="token comment">// 将 css 打包成独立的文件</span>
      <span class="token punctuation">{</span>
        text<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> commonStyleLoader
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        text<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span>commonStyleLoader<span class="token punctuation">,</span> <span class="token string">'less-loader'</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.m?js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        exclude<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">{</span>
          loader<span class="token operator">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
          options<span class="token operator">:</span> <span class="token punctuation">{</span>
            presets<span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token punctuation">[</span>
                <span class="token string">'@babel/preset-env'</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                  <span class="token comment">// 按需加载</span>
                  useBuiltIns<span class="token operator">:</span> <span class="token string">'usage'</span><span class="token punctuation">,</span>
                  <span class="token comment">// 指定 corejs 版本</span>
                  corejs<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                  <span class="token comment">// targets: &quot;defaults&quot;</span>
                  <span class="token comment">// target 可以指定浏览器版本</span>
                  targets<span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token comment">// 谷歌浏览器 58 以上的版本</span>
                    chrome<span class="token operator">:</span> <span class="token string">'58'</span><span class="token punctuation">,</span>
                    <span class="token comment">// IE 9 以上的版本</span>
                    ie<span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span>
                    firefox<span class="token operator">:</span> <span class="token string">'60'</span><span class="token punctuation">,</span>
                    safari<span class="token operator">:</span> <span class="token string">'10'</span><span class="token punctuation">,</span>
                    edge<span class="token operator">:</span> <span class="token string">'17'</span>
                  <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
              <span class="token punctuation">]</span>
            <span class="token punctuation">]</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpe?g|gif)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">'asset'</span><span class="token punctuation">,</span>
        parser<span class="token operator">:</span> <span class="token punctuation">{</span>
          dataUrlCondition<span class="token operator">:</span> <span class="token punctuation">{</span>
            maxSize<span class="token operator">:</span> <span class="token number">8</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token comment">// 默认使用的也是 8kb， 也可以在此处设置</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 设置打包之后的路径和名称</span>
        generator<span class="token operator">:</span> <span class="token punctuation">{</span>
          filename<span class="token operator">:</span> <span class="token string">&quot;image/[name][ext]&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(htm|html)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">{</span>
          loader<span class="token operator">:</span> <span class="token string">'html-loader'</span><span class="token punctuation">,</span>
          options<span class="token operator">:</span> <span class="token punctuation">{</span>
            esModule<span class="token operator">:</span> <span class="token boolean">false</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(eot|svg|ttf|woff|woff2)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">'asset'</span><span class="token punctuation">,</span>
        parser<span class="token operator">:</span> <span class="token punctuation">{</span>
          dataUrlCondition<span class="token operator">:</span> <span class="token punctuation">{</span>
            maxSize<span class="token operator">:</span> <span class="token number">8</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token comment">// 默认使用的也是 8kb， 也可以在此处设置</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 设置打包之后的路径和名称</span>
        generator<span class="token operator">:</span> <span class="token punctuation">{</span>
          filename<span class="token operator">:</span> <span class="token string">&quot;fonts/[name][ext]&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 指定加载内容的路径</span>
    contentBase<span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../output'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 启用 gzip 压缩</span>
    compress<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 端口号</span>
    port<span class="token operator">:</span> <span class="token number">9200</span><span class="token punctuation">,</span>
    <span class="token comment">// 启用自动更新 （禁用hot）</span>
    liveReload<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 配置代理，解决接口跨域问题</span>
    proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// https://localhost:9200/api</span>
      <span class="token string">'/api'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// https://localhost:9200/api/users =&gt; https://api.github.com/api/users</span>
        target<span class="token operator">:</span> <span class="token string">'https://api.github.com'</span><span class="token punctuation">,</span>
        <span class="token comment">// https://localhost:9200/api/users =&gt; https://api.github.com/users</span>
        pathRewrite<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string">'^/api'</span><span class="token operator">:</span> <span class="token string">''</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 不能使用 localhost:9200 作为 github 的主机名</span>
        changeOrigin<span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 配置目标</span>
  target<span class="token operator">:</span> <span class="token string">&quot;web&quot;</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">'css/[name].css'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">StylelintPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// 指定需要进行格式校验的文件</span>
      files<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'src/css/*.{css, less, sass, scss}'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">ESLintPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// 自动解决常规的代码格式报错</span>
      fix<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 直接将 src 下，不需要特殊处理的文件，直接复制到输出目录中</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">'src/public'</span><span class="token punctuation">,</span>
          to<span class="token operator">:</span> <span class="token string">'public'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>// webpack.dev.conf.js
// 开发环境配置文件
const HtmlWebpackPlugin = require('html-webpack-plugin')
const { merge } = require('webpack-merge')
const baseWebpackConfig = require('./webpack.base.conf')

const devWebpackConfig = merge(baseWebpackConfig, {
  // 这里是开发模式对应的配置
  mode: 'development',
  plugins: [
    new HtmlWebpackPlugin({
      // 指定打包后的文件名称
      filename: 'index.html',
      // 用来指定生成 html 的模板
      template: './src/index.ejs',
      // 指定 HTML 中的变量
      title: 'Webpack Demo'
    }),
    new HtmlWebpackPlugin({
      // 指定打包后的文件名称
      filename: 'about.html',
      // 用来指定生成 html 的模板
      template: './src/index.ejs',
      // 指定 HTML 中的变量
      title: '关于我们'
    })
  ]
})

module.exports = devWebpackConfig
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.prod.conf.js</span>
<span class="token comment">// 生产环境配置文件</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> OptimizeCSSPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'optimize-css-assets-webpack-plugin'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> merge <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> baseWebpackConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.base.conf'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> prodWebpackConfig <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>baseWebpackConfig<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// 这里是开发模式对应的配置</span>
  mode<span class="token operator">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// 压缩 css</span>
    <span class="token keyword">new</span> <span class="token class-name">OptimizeCSSPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// 指定打包后的文件名称</span>
      filename<span class="token operator">:</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span>
      <span class="token comment">// 用来指定生成 html 的模板</span>
      template<span class="token operator">:</span> <span class="token string">'./src/index.ejs'</span><span class="token punctuation">,</span>
      <span class="token comment">// 指定 HTML 中的变量</span>
      title<span class="token operator">:</span> <span class="token string">'Webpack Demo'</span><span class="token punctuation">,</span>
      <span class="token comment">// 压缩html</span>
      minify<span class="token operator">:</span> <span class="token punctuation">{</span>
        collapseWhitespace<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        keepClosingSlash<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        removeComments<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        removeRedundantAttributes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        removeScriptTypeAttributes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        removeStyleLinkTypeAttributes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        useShortDoctype<span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// 指定打包后的文件名称</span>
      filename<span class="token operator">:</span> <span class="token string">'about.html'</span><span class="token punctuation">,</span>
      <span class="token comment">// 用来指定生成 html 的模板</span>
      template<span class="token operator">:</span> <span class="token string">'./src/index.ejs'</span><span class="token punctuation">,</span>
      <span class="token comment">// 指定 HTML 中的变量</span>
      title<span class="token operator">:</span> <span class="token string">'关于我们'</span><span class="token punctuation">,</span>
      <span class="token comment">// 压缩html</span>
      minify<span class="token operator">:</span> <span class="token punctuation">{</span>
        collapseWhitespace<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        keepClosingSlash<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        removeComments<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        removeRedundantAttributes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        removeScriptTypeAttributes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        removeStyleLinkTypeAttributes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        useShortDoctype<span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> prodWebpackConfig
</code></pre></div><ul><li><p>Webpack DefinePlugin</p> <ul><li>DefinePlugin
<ul><li>为配置注入全局变量</li> <li>开发环境和生成环境的接口地址不同</li></ul></li></ul> <img src="/TechnologyBlogNotes/assets/img/1624348352870.066867b1.png" alt="1624348352870" style="zoom:200%;"></li></ul> <h2 id="自定义-plugin"><a href="#自定义-plugin" class="header-anchor">#</a> 自定义 plugin</h2> <ul><li>Webpack 插件是一个具有 apply 方法的 JavaScript 对象。apply 方法会被 webpack.compiler 调用，并且在整个编译声明周期都可以访问 compiler 对象</li> <li>原理：
<ul><li>通过在 <code>生命周期</code> 的 <code>钩子</code> 中挂载函数，来实现功能扩展</li></ul></li> <li>详情：
<ul><li>https://webpack.docschina.org/concepts/plugins/</li></ul></li></ul> <p><strong>生命周期</strong></p> <ul><li>生命周期就是<code>整个生命过程中的关键节点</code></li> <li>人：出生 -&gt; 入学 -&gt; 毕业 -&gt; 结婚 -&gt; 生子 -&gt; 死亡</li> <li>程序：初始化 -&gt; 挂载 -&gt; 渲染 -&gt; 展示 -&gt; 销毁</li></ul> <p><strong>钩子</strong></p> <ul><li>钩子是 <code>提前在可能增加功能的地方，埋好(预设)一个函数</code></li> <li>生命周期中的函数</li></ul> <h4 id="webpack-常用钩子"><a href="#webpack-常用钩子" class="header-anchor">#</a> webpack 常用钩子</h4> <ul><li>https://webpack.docschina.org/api/compiler-hooks/</li></ul> <p><img src="/TechnologyBlogNotes/assets/img/1624350008112.d146997b.png" alt=""></p> <h2 id="自定义-loader"><a href="#自定义-loader" class="header-anchor">#</a> 自定义 loader</h2> <ul><li>loader 本质上就是一个 ESM 模块，它导出一个函数，在函数中对打包资源进行转换</li> <li>声明一个读取 markdown（.md）文件内容的 loader
<ul><li>marked （将 markdown 语法转换成 html ）</li> <li>loader-utils （接受 loader 的配置项）</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 自定义 loader 的语法</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> getOptions <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'loader-utils'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> marked <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'marked'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 获取 loader 配置选项</span>
  <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token function">getOptions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>

  <span class="token comment">// 对输入内容进行处理</span>
  <span class="token keyword">const</span> html <span class="token operator">=</span> <span class="token function">marked</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span>

  <span class="token comment">// 返还给下一个 loader 处理</span>
  <span class="token keyword">return</span> html
<span class="token punctuation">}</span>
</code></pre></div><h2 id="代码分离-code-splitting"><a href="#代码分离-code-splitting" class="header-anchor">#</a> 代码分离 （Code Splitting）</h2> <p>如果把所有代码都打包到一起，可能最终的代码非常大，从而影响加载时间，而且很多代码初始化时是不需要加载的，因此，我们可以根据代码使用的紧急程度，将代码分割打包后，按需加载。</p> <p><img src="/TechnologyBlogNotes/assets/img/1624350760389.987ee8b8.png" alt="1624350760389"></p> <p><img src="/TechnologyBlogNotes/assets/img/1624350774256.0fbfbbe6.png" alt="1624350774256"></p> <h3 id="如何分离"><a href="#如何分离" class="header-anchor">#</a> <strong>如何分离</strong></h3> <ul><li><strong>多入库打包</strong>：配置 entry 加载多个入口文件</li> <li><strong>提取公共模块</strong>：optimization.splitChunks.chunks:all</li> <li><strong>动态导入</strong>：按需加载 | 预加载</li></ul> <h3 id="多入口打包"><a href="#多入口打包" class="header-anchor">#</a> 多入口打包</h3> <ul><li><p>entry （后面写成对象）</p> <blockquote><p>{</p> <p>​	index: &quot;./src/index.js&quot;,</p> <p>​	about: &quot;./src/about.js&quot;</p> <p>}</p></blockquote></li> <li><p>output.filename （不能写成固定名称，否则报错）</p> <ul><li>[name].bundle.js</li></ul></li> <li><p>HtmlWebpackPlugin （不同页面加载各自的 bundle ）</p> <ul><li>chunks: [&quot;index&quot;]  ---&gt; index.html 加载 index.bundle.js</li> <li>chunks: [&quot;about&quot;]    --&gt; about.html 加载 about.bundle.js</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code> entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    index<span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
    about<span class="token operator">:</span> <span class="token string">'./src/about.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 所有输出文件的目标路径 必须是绝对路径</span>
    path<span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

    filename<span class="token operator">:</span> <span class="token string">'[name].bundle.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token comment">// plugin 设置 HtmlWebpackPlugin </span>
  <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// 指定打包后的文件名称</span>
      filename<span class="token operator">:</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span>
      <span class="token comment">// 用来指定生成 html 的模板</span>
      template<span class="token operator">:</span> <span class="token string">'./src/index.ejs'</span><span class="token punctuation">,</span>
      <span class="token comment">// 指定 HTML 中的变量</span>
      title<span class="token operator">:</span> <span class="token string">'Webpack Demo'</span><span class="token punctuation">,</span>
      <span class="token comment">// 引入要加载的打包文件</span>
      chunks<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'index'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="提取公共模块"><a href="#提取公共模块" class="header-anchor">#</a> 提取公共模块</h3> <p>以jquery为例，需要将 jquery 单独提取出来</p> <p><img src="/TechnologyBlogNotes/assets/img/1624351668610.2926c4c2.png" alt="1624351668610"></p> <p><img src="/TechnologyBlogNotes/assets/img/1624351706734.3f9bc1d4.png" alt="1624351706734"></p> <ul><li>使用 optimization.splitChunks.chunks:all
<ul><li>将公共文件提取出来，单独打包</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>export <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'production'</span>
  <span class="token comment">// 优化策略 在最底层</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
      chunks<span class="token operator">:</span> <span class="token string">'all'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="动态导入"><a href="#动态导入" class="header-anchor">#</a> 动态导入</h3> <ul><li>懒加载
<ul><li>默认不加载，事件触发后才加载</li> <li>webpackChunkName: &quot;懒加载名称&quot;</li></ul></li> <li>预加载
<ul><li>先等待其他资源加载，浏览器空闲时，再加载</li> <li>webpackPrefetch: true</li> <li>缺点： 在移动端有兼容性问题</li></ul></li></ul> <p>可以根据注释中的 webpackChunkName 指定懒加载的文件名称</p> <p><img src="/TechnologyBlogNotes/assets/img/1624352256383.ed659464.png" alt="1624352256383"></p> <div class="language-js extra-class"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// import 启动懒加载</span>
  <span class="token comment">// webpackChunkName: 'desc' 指定懒加载的文件名称</span>
  <span class="token comment">// webpackPrefetch: true 启动预加载</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: 'desc', webpackPrefetch: true */</span><span class="token string">'js文件'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> desc <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">desc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="源码映射-source-map"><a href="#源码映射-source-map" class="header-anchor">#</a> 源码映射（source Map）</h2> <p><strong>什么是 source Map</strong></p> <ul><li>是一种 <code>源代码</code> 与 <code>构建后代码</code> 之间的映射技术。</li> <li>通过 .map 文件，将构建后的代码与源代码之间建立映射关系。</li></ul> <p><strong>为什么要用 source Map</strong></p> <p>因为构建后的代码，是压缩之后的代码，出现问题之后不好定位，所以才有了 source Map 可以快速定位问题代码。</p> <p><strong>如何生成 source Map</strong></p> <blockquote><p>devtool: &quot;映射模式&quot;</p></blockquote> <h4 id="映射模式"><a href="#映射模式" class="header-anchor">#</a> 映射模式</h4> <p>不同的映射模式的报错定位效果和打包执行速度不同</p> <ul><li>webpack 4 中，一共有 13 种不同的映射模式</li> <li>webpack 5 中，一共有 26 种不同的映射模式</li></ul> <p>Webpack 5 中的命名更严格</p> <ul><li>cheap-module-eval-source-map =&gt; eval-cheap-module-source-map</li> <li>^(inline-|hidden-|eval-)?(nosources-)?(cheap-(module-)?)?source-map$</li></ul> <p><img src="/TechnologyBlogNotes/assets/img/1624355749984.66ecfbea.png" alt="1624355749984"></p> <h5 id="映射模式-source-map"><a href="#映射模式-source-map" class="header-anchor">#</a> 映射模式: source-map</h5> <p><img src="/TechnologyBlogNotes/assets/img/1624356039603.a445e3f4.png" alt="1624356039603"></p> <h5 id="映射模式-cheap-source-map"><a href="#映射模式-cheap-source-map" class="header-anchor">#</a> 映射模式：cheap-source-map</h5> <p><img src="/TechnologyBlogNotes/assets/img/1624356250344.74651ead.png" alt="1624356250344"></p> <p><img src="/TechnologyBlogNotes/assets/img/1624356110679.23517be5.png" alt="1624356110679"></p> <p><img src="/TechnologyBlogNotes/assets/img/1624356158705.e05c05fd.png" alt="1624356158705"></p> <h5 id="映射模式-cheap-module-source-map"><a href="#映射模式-cheap-module-source-map" class="header-anchor">#</a> 映射模式：cheap-module-source-map</h5> <p><img src="/TechnologyBlogNotes/assets/img/1624356191672.23e5a63e.png" alt="1624356191672"></p> <h5 id="映射模式-nosources-source-map"><a href="#映射模式-nosources-source-map" class="header-anchor">#</a> 映射模式：nosources-source-map</h5> <p><img src="/TechnologyBlogNotes/assets/img/1624356327338.0e2feb3c.png" alt="1624356327338"></p> <h5 id="映射模式-hidden-source-map"><a href="#映射模式-hidden-source-map" class="header-anchor">#</a> 映射模式：hidden-source-map</h5> <p><img src="/TechnologyBlogNotes/assets/img/1624356423365.792f3bad.png" alt="1624356423365"></p> <h5 id="映射模式-inline-source-map"><a href="#映射模式-inline-source-map" class="header-anchor">#</a> 映射模式: inline-source-map</h5> <p><img src="/TechnologyBlogNotes/assets/img/1624356480367.96b5beba.png" alt="1624356480367"></p> <h5 id="映射模式-inline-cheap-source-map"><a href="#映射模式-inline-cheap-source-map" class="header-anchor">#</a> 映射模式: inline-cheap-source-map</h5> <p><img src="/TechnologyBlogNotes/assets/img/1624356530066.6ed43427.png" alt="1624356530066"></p> <h5 id="映射模式-inline-cheap-module-source-map"><a href="#映射模式-inline-cheap-module-source-map" class="header-anchor">#</a> 映射模式: inline-cheap-module-source-map</h5> <p><img src="/TechnologyBlogNotes/assets/img/1624356568925.6a9ff43f.png" alt="1624356568925"></p> <h5 id="映射模式-eval"><a href="#映射模式-eval" class="header-anchor">#</a> 映射模式： eval</h5> <p><img src="/TechnologyBlogNotes/assets/img/1624356653899.e282497c.png" alt="1624356653899"></p> <h5 id="映射模式-eval-source-map"><a href="#映射模式-eval-source-map" class="header-anchor">#</a> 映射模式：eval-source-map</h5> <p><img src="/TechnologyBlogNotes/assets/img/1624356697440.0a14f8b3.png" alt="1624356697440"></p> <h5 id="映射模式-eval-cheap-source-map"><a href="#映射模式-eval-cheap-source-map" class="header-anchor">#</a> 映射模式：eval-cheap-source-map</h5> <p><img src="/TechnologyBlogNotes/assets/img/1624356748932.85c06faf.png" alt="1624356748932"></p> <h5 id="映射模式-eval-cheap-module-source-map"><a href="#映射模式-eval-cheap-module-source-map" class="header-anchor">#</a> 映射模式：eval-cheap-module-source-map</h5> <p><img src="/TechnologyBlogNotes/assets/img/1624356794727.8c189941.png" alt="1624356794727"></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/TechnologyBlogNotes/assets/js/app.da895a72.js" defer></script><script src="/TechnologyBlogNotes/assets/js/2.8722ed46.js" defer></script><script src="/TechnologyBlogNotes/assets/js/3.6f9ee2f3.js" defer></script>
  </body>
</html>
